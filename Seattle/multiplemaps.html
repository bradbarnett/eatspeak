<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css"/>
	<!-- <link rel="stylesheet" href="leafletd3.css"/> --></head>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
     <link rel="stylesheet" href="../../foundation/css/foundation.css" />
     <link href='http://fonts.googleapis.com/css?family=Vollkorn:700' rel='stylesheet' type='text/css'>
    <script src="js/vendor/modernizr.js"></script>
<body>
    <!-- <div class="filter_options">
		<input class="filter_button" name="name" id="a_button" type="checkbox"  value="Vietnamese">a</input><br>
		<input class="filter_button" name="name" id="b_button" type="checkbox"  value="Mexican">b</input><br>
		<input class="filter_button" name="name" id="c_button" type="checkbox"  value="Ethiopian">c</input><br>
		</div> -->    
<div class="fixed">	
	<nav class="top-bar" data-topbar role="navigation">
		<div id="title">EatSpeak: Seattle</div>
			
		<div id="nav">
<!-- 			<button class="ethnicity" value="Vietnamese">Vietnamese</button>
<button class="ethnicity" value="Chinese">Chinese</button>
<button class="ethnicity" value="Japanese">Japanese</button>
<button class="ethnicity" value="Korean">Korean</button>
<button class="ethnicity" value="Mexican">Mexican</button>
<button class="ethnicity" value="African">African</button>
<button class="ethnicity" value="Russian">Russian</button>
<button class="ethnicity" value="Indian">Indian</button> -->
<button class="story" id="rollCall">Roll Call</button>
<button class="story" id="intheValley">In the Valley</button>
<button class="story" id="companyTown">Company Town</button>
<button class="story" id="historyLessons">History Lessons</button>
<button class="story" id="explore">Explore!</button>
<button class="story" id="university">!!!</button>

			
			<!-- <form method="post">
			    <select id="dropdown" name="dropdown">
			    	<option value="">Choose One</option>
			        <option value="Vietnamese">Vietnamese</option>
			        <option value="Chinese">Chinese</option>
			        <option value="Japanese">Japanese</option>
			        <option value="Korean">Korean</option>
			        <option value="Mexican">Mexican</option>
			        <option value="African">African</option>
			        <option value="Russian">Russian</option>
			        <option value="Indian">Indian</option>
			    </select>
			</form> -->
		</div>
	</nav>
</div>	
	<div class="section-container">
	<!-- <div class="leftpanel"> -->
		<div class="sectiontitle">Roll Call</div>
		<div class="special">&#9679; University of Washington Campus</div>
		<!-- <div class="sectiondesc">

		<div class="referencemap" id="refmap"></div> -->
	<!-- </div> -->
	<div id="mapsBox">

		<div class="maps"><div class="mapcontent" id="mapChinese"></div>Chinese</div>
		<div class="maps"> <div class="mapcontent" id="mapVietnamese"></div>Vietnamese</div>
		<div class="maps"> <div class="mapcontent" id="mapKorean"></div>Korean</div>
		<div class="maps"> <div class="mapcontent" id="mapMexican"></div>Latin American</div>
		<div class="maps"> <div class="mapcontent" id="mapAfrican"></div>African</div>
		<div class="maps"> <div class="mapcontent" id="mapIndian"></div>Indian</div>
    </div>
    </div>
    <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.4"></script>
	<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>    
    <script src="../js/Leaflet.Sync/L.Map.Sync.js"> </script>
    <script type="text/javascript" src="../d3/d3.min.js"></script>
    <script src="http://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"> </script>
    <script src="../scripts/Leaflet.Coordinates-master/dist/Leaflet.Coordinates-0.1.4.min.js"> </script>
    <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.4"></script>
	<link rel="stylesheet" type="text/css" href="../../foundation/css/app.css"> 
	<link rel="stylesheet" type"text/css" href="../scripts/Leaflet.Coordinates-master/dist/Leaflet.Coordinates-0.1.4.css">
    <!-- <script src="geotoarray.js"></script> -->
    <!-- <script src="geotoarrayMex.js"></script> -->    
    <script src="arrays/africanarray.js"></script>
    <script src="arrays/chinesearray.js"></script>
    <script src="arrays/indianarray.js"></script>
    <script src="arrays/japanesearray.js"></script>
    <script src="arrays/koreanarray.js"></script>
    <script src="arrays/russianarray.js"></script>
    <script src="arrays/Mexicanarray.js"></script>
    <script src="arrays/vietnamesearray.js"></script>
    <script>
	
	

 $(function() {
 				
	var panelVal;
   
	// var layer = new L.tileLayer('http://a{s}.acetate.geoiq.com/tiles/acetate-hillshading/{z}/{x}/{y}.png', {
	// 	attribution: '&copy;2012 Esri & Stamen, Data from OSM and Natural Earth',
	// 	subdomains: '0123',
	// 	minZoom: 2,
	// 	maxZoom: 18
	// 	});	
		
	// var layer = L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
	// attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	// subdomains: '0123',
		// minZoom: 2,
		// maxZoom: 18
		// });		
	


	var layer1 = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	subdomains: 'abcd',
	maxZoom: 19
});

	var layer2 = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	subdomains: 'abcd',
	maxZoom: 19
});

	var layer3 = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	subdomains: 'abcd',
	maxZoom: 19
});		

	var layer4 = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	subdomains: 'abcd',
	maxZoom: 19
});
	
	var layer5 = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	subdomains: 'abcd',
	maxZoom: 19
});

	var layer6 = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	subdomains: 'abcd',
	maxZoom: 19
});




	var mapChinese = new L.Map("mapChinese", {
	    center: new L.LatLng(47.6063889,-122.3308333),
	    zoom: 11,
	    opacity: .5, attributionControl: false
		});

	var heatChi= new L.heatLayer(heatChinese,{
	        radius: 10,
	        blur: 25, 
	        maxZoom: 20,
	        maxOpacity: 1,
	        minOpacity: 0,
	        max: .2,
	        gradient: {.3: "steelblue",.4: "#FFE6CC", .8: "orange", 1: "yellow"}
	    });

	mapChinese.addLayer(layer1);
	mapChinese.addLayer(heatChi);

//VIETNAMESE
	var mapVietnamese = new L.Map("mapVietnamese", {
	    center: new L.LatLng(47.6063889,-122.3308333),
	    zoom: 11, zoomControl: false,
	    opacity: .5, attributionControl: false
		});

		var heatViet = new L.heatLayer(heatVietnamese,{
	        radius: 10,
	        blur: 25, 
	        maxZoom: 20,
	        maxOpacity: 1,
	        minOpacity: .1,
	        max: .2,
		    gradient: {.3: "steelblue", .4: "#FFE6CC", .7: "orange", 1: "yellow"}
		    });
	
	mapVietnamese.addLayer(layer2);
	mapVietnamese.addLayer(heatViet);

//KOREAN
	var mapKorean = new L.Map("mapKorean", {
	    center: new L.LatLng(47.6063889,-122.3308333),
	    zoom: 11, zoomControl: false,
	    opacity: .5, attributionControl: false
		});	

	var heatKor= new L.heatLayer(heatKorean,{
        radius: 10,
        blur: 25, 
        maxZoom: 20,
        maxOpacity: 1,
        minOpacity: .1,
        max: .2,
        gradient: {.4: "steelblue", .6: "#FFE6CC", .7: "orange", 1: "yellow"}
	        // "#F2784B"
	    });
	
	mapKorean.addLayer(layer3);	
	mapKorean.addLayer(heatKor);	



//MEXICAN

	var mapMexican = new L.Map("mapMexican", {
	    center: new L.LatLng(47.6063889,-122.3308333),
	    zoom: 11, zoomControl: false,
	    opacity: .5, attributionControl: false
		});

		var heatMex = new L.heatLayer(heatMexican,{
		        radius: 10,
		        blur: 25, 
		        maxZoom: 20,
		        maxOpacity: 1,
		        minOpacity: .1,
		        max: .2,
   		        gradient: {.3: "steelblue", .4: "#FFE6CC", .7: "orange", 1: "yellow"}
	        // "#F2784B"
		    });

	mapMexican.addLayer(layer4);
	mapMexican.addLayer(heatMex);

//AFRICAN
	var mapAfrican = new L.Map("mapAfrican", {
	    center: new L.LatLng(47.6063889,-122.3308333),
	    zoom: 11, zoomControl: false,
	    opacity: .5, attributionControl: false
		});


		var heatAfr = new L.heatLayer(heatAfrican,{
		        radius: 10,
		        blur: 25, 
		        maxZoom: 20,
		        maxOpacity: 1,
		        minOpacity: .1,
		        max: .2,
   		        gradient: {.3: "steelblue", .4: "#FFE6CC", .7: "orange", 1: "yellow"}
		        // "#F2784B"
		    });

		mapAfrican.addLayer(layer5);
		mapAfrican.addLayer(heatAfr);


//INDIAN
	var mapIndian = new L.Map("mapIndian", {
	    center: new L.LatLng(47.6063889,-122.3308333),
	    zoom: 11, zoomControl: false,
	    opacity: .5, attributionControl: false
		});
	
		var heatInd = new L.heatLayer(heatIndian,{
		        radius: 10,
		        blur: 25, 
		        maxZoom: 20,
		        maxOpacity: 1,
		        minOpacity: .1,
		        max: .2,
   		        gradient: {.3: "steelblue", .4: "#FFE6CC", .7: "orange", 1: "yellow"}
		        // "#F2784B"
		    });

	mapIndian.addLayer(layer6);
	mapIndian.addLayer(heatInd);




// var heatLayers = new L.LayerGroup().addTo(map);	
// 	L.control.coordinates({
//     position:"bottomleft", //optional default "bootomright"
//     decimals:2, //optional default 4
//     decimalSeperator:".", //optional default "."
//     labelTemplateLat:"Latitude: {y}", //optional default "Lat: {y}"
// 	    labelTemplateLng:"Longitude: {x}", //optional default "Lng: {x}"
//     enableUserInput:true, //optional default true
//     useDMS:false, //optional default false
//     useLatLngOrder: true //ordering of labels, default false-> lng-lat
// }).addTo(map);









	
mapChinese.sync(mapVietnamese);
mapChinese.sync(mapKorean);
mapChinese.sync(mapMexican);
mapChinese.sync(mapAfrican);
mapChinese.sync(mapIndian);
	

// var referencemap = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
// 	attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
// 	maxZoom: 16
// });
	
// var refmap = new L.Map("refmap", {
//     center: new L.LatLng(47.6063889,-122.3308333),
//     zoom: 9, zoomControl: false,
//     opacity: .5, attributionControl: false
// 	});	

// 	refmap.addLayer(referencemap);


var mainBounds = mapChinese.getBounds();
// var refRect = new L.rec#FFE6CCgle(mainBounds, {color: "#ff7800", weight: 1}).addTo(refmap);


	function heatMap(type) {
		
		if (type === undefined) {
		type = "Vietnamese";
		}
		else {
			type == type;
		}	
		    	
		if (type == "Vietnamese") {  	
		  heatLayers.clearLayers();
		  heatViet.addTo(heatLayers);
	    }	
	    else if (type == "Mexican")	{
		  heatLayers.clearLayers();
		  heatMex.addTo(heatLayers);
	    }
	    else if (type == "African")	{
		  heatLayers.clearLayers();
		  heatAfr.addTo(heatLayers);
	    }
	    else if (type == "Russian")	{
		  heatLayers.clearLayers();
		  heatRus.addTo(heatLayers);
	    }
	    else if (type == "Indian")	{
		  heatLayers.clearLayers();
		  heatInd.addTo(heatLayers);
	    }
	    else if (type == "Korean")	{
		  heatLayers.clearLayers();
		  heatKor.addTo(heatLayers);
	    }
	    else if (type == "Chinese")	{
		  heatLayers.clearLayers();
		  heatChi.addTo(heatLayers);
	    }
	    else if (type == "Japanese")	{
		  heatLayers.clearLayers();
		  heatJap.addTo(heatLayers);
	    }
	    
	    else {}
    }   



	
// 	var universityBounds = [[47.63,-122.36],[47.69,-122.23]];
// 	var techBounds = [[47.57-122.35],[47.72,-122.04]];

// 	$('#university').click(function() {
// 		map.fitBounds(universityBounds, 9);
// 		heatLayers.clearLayers();
// 		heatRus.addTo(heatLayers);		
		
// 		heatKor.addTo(heatLayers);
// heatChi.addTo(heatLayers);
// 		})

// 	$('#tech').click(function() {
// 		map.fitBound(techBounds, 4);
// 		heatInd.addTo(heatLayers);
// 		})
//Let the D3 begin!    

//Start the svg			
	mapChinese._initPathRoot()    
	mapVietnamese._initPathRoot()    
	mapKorean._initPathRoot()  
	mapAfrican._initPathRoot()    
	mapIndian._initPathRoot()    
	mapMexican._initPathRoot()  	  





var svgChinese = d3.select("#mapChinese").select("svg");
var gYelpChinese = svgChinese.append("g").attr("class", "gYelpChinese");

var gradientChinese = svgChinese.append("svg:defs")
.append("svg:radialGradient")
.attr("id", "gradient")
.attr("x1", "0%")
.attr("y1", "0%")
.attr("x2", "100%")
.attr("y2", "100%")
.attr("spreadMethod", "pad");

gradientChinese.append("svg:stop")
    .attr("offset", "0%")
    .attr("stop-color", "#4d4843")
    .attr("stop-opacity", .7);

gradientChinese.append("svg:stop")
    .attr("offset", "100%")
    .attr("stop-color", "#4d4843")
    .attr("stop-opacity", .3);

d3.csv("seattlerestaurants.csv", function(datacsv) {
	datacsv.forEach(function(d) {
		d.LatLng = new L.LatLng(d.Lat,d.Lon)})	
		// gYelp.selectAll("circle").remove();

		var circleYelpChinese = gYelpChinese.selectAll("circle")
			.data(datacsv.filter(function(d) { 
           		return d.Category === "Chinese";
           		}))	
			.enter()
			.append("circle");

		var max = d3.max(datacsv, function(d) { return +d.Reviews;});
		var min = d3.min(datacsv, function(d) {	return +d.Reviews;});  	   
		var oScale = d3.scale.linear()
			.domain([min, max])
			.range([75,25]);
			   
	function update() {
		circleYelpChinese.attr("cx",function(d) { return mapChinese.latLngToLayerPoint(d.LatLng).x})
		circleYelpChinese.attr("cy",function(d) { return mapChinese.latLngToLayerPoint(d.LatLng).y})
		circleYelpChinese.attr("r", function(d) { 
			if (d.Reviews > 10) { return Math.sqrt(parseInt(d.Reviews) * 0.2); }
		  	else if (d.Reviews > 50) { return Math.sqrt(parseInt(d.Reviews) * .1);}
		  	else if (d.Reviews > 200) { return Math.sqrt(parseInt(d.Reviews) * .075);}
		  	else { return 10; }
		  	})
		circleYelpChinese.attr("callit", function(d) {return d.Name})
		circleYelpChinese.style("fill", "url(#gradient)")
		circleYelpChinese.style("stroke", "rgba(255,255,255,.2)")
		circleYelpChinese.style("opacity", function(d) { return Math.sqrt(oScale(d.Reviews) * .01)});
	}
	mapChinese.on("viewreset", update);
	update();		
})	

var svgVietnamese = d3.select("#mapVietnamese").select("svg");
var gYelpVietnamese = svgVietnamese.append("g").attr("class", "gYelpVietnamese");

var gradientVietnamese = svgVietnamese.append("svg:defs")
.append("svg:radialGradient")
.attr("id", "gradient")
.attr("x1", "0%")
.attr("y1", "0%")
.attr("x2", "100%")
.attr("y2", "100%")
.attr("spreadMethod", "pad");

gradientVietnamese.append("svg:stop")
    .attr("offset", "0%")
    .attr("stop-color", "#4d4843")
    .attr("stop-opacity", .8);

gradientVietnamese.append("svg:stop")
    .attr("offset", "100%")
    .attr("stop-color", "white")
    .attr("stop-opacity", .1);

d3.csv("seattlerestaurants.csv", function(datacsv) {
	datacsv.forEach(function(d) {
		d.LatLng = new L.LatLng(d.Lat,d.Lon)})	
		// gYelp.selectAll("circle").remove();

		var circleYelpVietnamese = gYelpVietnamese.selectAll("circle")
			.data(datacsv.filter(function(d) { 
           		return d.Category === "Vietnamese";
           		}))	
			.enter()
			.append("circle");

		var max = d3.max(datacsv, function(d) { return +d.Reviews;});
		var min = d3.min(datacsv, function(d) {	return +d.Reviews;});  	   
		var oScale = d3.scale.linear()
			.domain([min, max])
			.range([75,25]);
			   
	function update() {
		circleYelpVietnamese.attr("cx",function(d) { return mapVietnamese.latLngToLayerPoint(d.LatLng).x})
		circleYelpVietnamese.attr("cy",function(d) { return mapVietnamese.latLngToLayerPoint(d.LatLng).y})
		circleYelpVietnamese.attr("r", function(d) { 
			if (d.Reviews > 10) { return Math.sqrt(parseInt(d.Reviews) * 0.2); }
		  	else if (d.Reviews > 50) { return Math.sqrt(parseInt(d.Reviews) * .1);}
		  	else if (d.Reviews > 200) { return Math.sqrt(parseInt(d.Reviews) * .075);}
		  	else { return 10; }
		  	})
		circleYelpVietnamese.attr("callit", function(d) {return d.Name})
		circleYelpVietnamese.style("fill", "url(#gradient)")
		circleYelpVietnamese.style("stroke", "rgba(255,255,255,.1)")
		circleYelpVietnamese.style("opacity", function(d) { return Math.sqrt(oScale(d.Reviews) * .15)});
	}
	mapVietnamese.on("viewreset", update);
	update();		
})	



var svgKorean = d3.select("#mapKorean").select("svg");
var gYelpKorean = svgKorean.append("g").attr("class", "gYelpKorean");

var gradientKorean = svgKorean.append("svg:defs")
.append("svg:radialGradient")
.attr("id", "gradient")
.attr("x1", "0%")
.attr("y1", "0%")
.attr("x2", "100%")
.attr("y2", "100%")
.attr("spreadMethod", "pad");

gradientKorean.append("svg:stop")
    .attr("offset", "0%")
    .attr("stop-color", "#4d4843")
    .attr("stop-opacity", .8);

gradientKorean.append("svg:stop")
    .attr("offset", "100%")
    .attr("stop-color", "white")
    .attr("stop-opacity", .1);

d3.csv("seattlerestaurants.csv", function(datacsv) {
	datacsv.forEach(function(d) {
		d.LatLng = new L.LatLng(d.Lat,d.Lon)})	
		// gYelp.selectAll("circle").remove();

		var circleYelpKorean = gYelpKorean.selectAll("circle")
			.data(datacsv.filter(function(d) { 
           		return d.Category === "Korean";
           		}))	
			.enter()
			.append("circle");

		var max = d3.max(datacsv, function(d) { return +d.Reviews;});
		var min = d3.min(datacsv, function(d) {	return +d.Reviews;});  	   
		var oScale = d3.scale.linear()
			.domain([min, max])
			.range([75,25]);
			   
	function update() {
		circleYelpKorean.attr("cx",function(d) { return mapKorean.latLngToLayerPoint(d.LatLng).x})
		circleYelpKorean.attr("cy",function(d) { return mapKorean.latLngToLayerPoint(d.LatLng).y})
		circleYelpKorean.attr("r", function(d) { 
			if (d.Reviews > 10) { return Math.sqrt(parseInt(d.Reviews) * 0.2); }
		  	else if (d.Reviews > 50) { return Math.sqrt(parseInt(d.Reviews) * .1);}
		  	else if (d.Reviews > 200) { return Math.sqrt(parseInt(d.Reviews) * .075);}
		  	else { return 10; }
		  	})
		circleYelpKorean.attr("callit", function(d) {return d.Name})
		circleYelpKorean.style("fill", "url(#gradient)")
		circleYelpKorean.style("stroke", "rgba(255,255,255,.1)")
		circleYelpKorean.style("opacity", function(d) { return Math.sqrt(oScale(d.Reviews) * .15)});
	}
	mapKorean.on("viewreset", update);
	update();		
})	


var svgAfrican = d3.select("#mapAfrican").select("svg");
var gYelpAfrican = svgAfrican.append("g").attr("class", "gYelpAfrican");

var gradientAfrican = svgAfrican.append("svg:defs")
.append("svg:radialGradient")
.attr("id", "gradient")
.attr("x1", "0%")
.attr("y1", "0%")
.attr("x2", "100%")
.attr("y2", "100%")
.attr("spreadMethod", "pad");

gradientAfrican.append("svg:stop")
    .attr("offset", "0%")
    .attr("stop-color", "#4d4843")
    .attr("stop-opacity", .8);

gradientAfrican.append("svg:stop")
    .attr("offset", "100%")
    .attr("stop-color", "white")
    .attr("stop-opacity", .1);

d3.csv("seattlerestaurants.csv", function(datacsv) {
	datacsv.forEach(function(d) {
		d.LatLng = new L.LatLng(d.Lat,d.Lon)})	
		// gYelp.selectAll("circle").remove();

		var circleYelpAfrican = gYelpAfrican.selectAll("circle")
			.data(datacsv.filter(function(d) { 
           		return d.Category === "African";
           		}))	
			.enter()
			.append("circle");

		var max = d3.max(datacsv, function(d) { return +d.Reviews;});
		var min = d3.min(datacsv, function(d) {	return +d.Reviews;});  	   
		var oScale = d3.scale.linear()
			.domain([min, max])
			.range([75,25]);
			   
	function update() {
		circleYelpAfrican.attr("cx",function(d) { return mapAfrican.latLngToLayerPoint(d.LatLng).x})
		circleYelpAfrican.attr("cy",function(d) { return mapAfrican.latLngToLayerPoint(d.LatLng).y})
		circleYelpAfrican.attr("r", function(d) { 
			if (d.Reviews > 10) { return Math.sqrt(parseInt(d.Reviews) * 0.2); }
		  	else if (d.Reviews > 50) { return Math.sqrt(parseInt(d.Reviews) * .1);}
		  	else if (d.Reviews > 200) { return Math.sqrt(parseInt(d.Reviews) * .075);}
		  	else { return 10; }
		  	})
		circleYelpAfrican.attr("callit", function(d) {return d.Name})
		circleYelpAfrican.style("fill", "url(#gradient)")
		circleYelpAfrican.style("stroke", "rgba(255,255,255,.1)")
		circleYelpAfrican.style("opacity", function(d) { return Math.sqrt(oScale(d.Reviews) * .15)});
	}
	mapAfrican.on("viewreset", update);
	update();		
})	

var svgIndian = d3.select("#mapIndian").select("svg");
var gYelpIndian = svgIndian.append("g").attr("class", "gYelpIndian");

var gradientIndian = svgIndian.append("svg:defs")
.append("svg:radialGradient")
.attr("id", "gradient")
.attr("x1", "0%")
.attr("y1", "0%")
.attr("x2", "100%")
.attr("y2", "100%")
.attr("spreadMethod", "pad");

gradientIndian.append("svg:stop")
    .attr("offset", "0%")
    .attr("stop-color", "#4d4843")
    .attr("stop-opacity", .8);

gradientIndian.append("svg:stop")
    .attr("offset", "100%")
    .attr("stop-color", "white")
    .attr("stop-opacity", .1);

d3.csv("seattlerestaurants.csv", function(datacsv) {
	datacsv.forEach(function(d) {
		d.LatLng = new L.LatLng(d.Lat,d.Lon)})	
		// gYelp.selectAll("circle").remove();

		var circleYelpIndian = gYelpIndian.selectAll("circle")
			.data(datacsv.filter(function(d) { 
           		return d.Category === "Indian";
           		}))	
			.enter()
			.append("circle");

		var max = d3.max(datacsv, function(d) { return +d.Reviews;});
		var min = d3.min(datacsv, function(d) {	return +d.Reviews;});  	   
		var oScale = d3.scale.linear()
			.domain([min, max])
			.range([75,25]);
			   
	function update() {
		circleYelpIndian.attr("cx",function(d) { return mapIndian.latLngToLayerPoint(d.LatLng).x})
		circleYelpIndian.attr("cy",function(d) { return mapIndian.latLngToLayerPoint(d.LatLng).y})
		circleYelpIndian.attr("r", function(d) { 
			if (d.Reviews > 10) { return Math.sqrt(parseInt(d.Reviews) * 0.2); }
		  	else if (d.Reviews > 50) { return Math.sqrt(parseInt(d.Reviews) * .1);}
		  	else if (d.Reviews > 200) { return Math.sqrt(parseInt(d.Reviews) * .075);}
		  	else { return 10; }
		  	})
		circleYelpIndian.attr("callit", function(d) {return d.Name})
		circleYelpIndian.style("fill", "url(#gradient)")
		circleYelpIndian.style("stroke", "rgba(255,255,255,.1)")
		circleYelpIndian.style("opacity", function(d) { return Math.sqrt(oScale(d.Reviews) * .15)});
	}
	mapIndian.on("viewreset", update);
	update();		
})	

var svgMexican = d3.select("#mapMexican").select("svg");
var gYelpMexican = svgMexican.append("g").attr("class", "gYelpMexican");

var gradientMexican = svgMexican.append("svg:defs")
.append("svg:radialGradient")
.attr("id", "gradient")
.attr("x1", "0%")
.attr("y1", "0%")
.attr("x2", "100%")
.attr("y2", "100%")
.attr("spreadMethod", "pad");

gradientMexican.append("svg:stop")
    .attr("offset", "0%")
    .attr("stop-color", "#4d4843")
    .attr("stop-opacity", .8);

gradientMexican.append("svg:stop")
    .attr("offset", "100%")
    .attr("stop-color", "white")
    .attr("stop-opacity", .1);

d3.csv("seattlerestaurants.csv", function(datacsv) {
	datacsv.forEach(function(d) {
		d.LatLng = new L.LatLng(d.Lat,d.Lon)})	
		// gYelp.selectAll("circle").remove();

		var circleYelpMexican = gYelpMexican.selectAll("circle")
			.data(datacsv.filter(function(d) { 
           		return d.Category === "Mexican";
           		}))	
			.enter()
			.append("circle");

		var max = d3.max(datacsv, function(d) { return +d.Reviews;});
		var min = d3.min(datacsv, function(d) {	return +d.Reviews;});  	   
		var oScale = d3.scale.linear()
			.domain([min, max])
			.range([75,25]);
			   
	function update() {
		circleYelpMexican.attr("cx",function(d) { return mapMexican.latLngToLayerPoint(d.LatLng).x})
		circleYelpMexican.attr("cy",function(d) { return mapMexican.latLngToLayerPoint(d.LatLng).y})
		circleYelpMexican.attr("r", function(d) { 
			if (d.Reviews > 10) { return Math.sqrt(parseInt(d.Reviews) * 0.2); }
		  	else if (d.Reviews > 50) { return Math.sqrt(parseInt(d.Reviews) * .1);}
		  	else if (d.Reviews > 200) { return Math.sqrt(parseInt(d.Reviews) * .075);}
		  	else { return 10; }
		  	})
		circleYelpMexican.attr("callit", function(d) {return d.Name})
		circleYelpMexican.style("fill", "url(#gradient)")
		circleYelpMexican.style("stroke", "rgba(255,255,255,.1)")
		circleYelpMexican.style("opacity", function(d) { return Math.sqrt(oScale(d.Reviews) * .15)});
	}
	mapMexican.on("viewreset", update);
	update();		
})	

});
 
</script>
<script src="js/vendor/jquery.js"></script>
<script src="js/foundation.min.js"></script>
<script>
  $(document).foundation();
</script>	
</body>
</html>
